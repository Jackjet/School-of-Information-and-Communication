<!--
 * @Author: your name
 * @Date: 3535-09-04 15:16:05
 * @LastEditTime: 2020-10-15 16:10:06
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \web\view\index.html
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="applicable-device" content="pc">
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=yes" name="viewport">
    <title>中国信通院</title>
    <link rel="stylesheet" href="../../public/icon_font/font_2146463_rwg5xu2h78/iconfont.css">
    <link rel="stylesheet" href="../../public/common/css/libs/style.css">
    <link rel="stylesheet" href="../../plugin/swiper/swiper.min.css">
    <link rel="stylesheet" href="../../libs/css/index.css">
    <link rel="stylesheet" href="../../libs/css/bigData.css">
    <script type="text/javascript" src="../../plugin/jQuery/jQuery.min.js"></script>
    <script src="../plugin/swiper/swiper.min.js"></script>
    <script src="../../plugin/temeplate/template-web.js" type="text/javascript"></script>
    <script src="../../libs/js/index.js" type="text/javascript"></script>
    <script src="../../public/common/js/libs/request.js"></script>
    <script type="text/javascript" src="../../public/common/js/libs/includ.js"></script>
    <link rel="stylesheet" href="../../public/common/css/frameWork.css">
    <link rel="stylesheet" href="../../plugin/layui/css/layui.css">
    <script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
    <style>
        .tips-text {
            width: 400px;
            height: 40px;
            background: #f0f9eb;
            color: #67c23a;
            border-radius: 5px;
            position: fixed;
            top: 10px;
            left: 50%;
            margin-left: -200px;
            z-index: 100;
            font-size: 14px;
            display: flex;
            align-items: center;
            box-sizing: border-box;
        }

        .tips-text i {
            display: inline-block;
            width: 18px;
            height: 18px;
            background: url('../../../public/image/chenggongtubiao.png');
            background-size: 100% 100%;
            margin: 0 15px;
        }

        .echarts_back {
            width: 100%;
            height: 500px;
            position: relative;
        }

        .echarts_box {
            position: absolute;
            left: 0;
            top: 0;
            width: 90%;
            height: 80%;
            margin-left: 5%;
            margin-top: 5%;
            border: 1px solid #0d155d;
            background: rgba(6, 19, 61, .8);
            background-image: url('../../public/image/border/quan.png');
            background-size: 100% 100%;
            display: flex;
        }

        .echarts_data,
        .echarts_map {
            flex: 1;
        }

        .echarts_data {
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }

        .echarts_data h3 {
            font-size: 16px;
            color: #fff;
            text-align: left;
            margin: 0;
            line-height: 30px;
        }

        .echarts_data ul {
            display: flex;
            color: #77e0f5;
            margin: 20px 0;
        }

        .echarts_data ul li {
            margin: 0;
            background-image: url('../../public/image/border/top.png');
            background-size: 100% 100%;
            margin: 0 10px;
        }

        .echarts_data ul li p {
            text-align: center;
            line-height: 24px;
        }

        .echarts_img {
            flex: 1;
            display: flex;
        }

        .img_title {
            flex: 1;
        }

        .img_title h4 {
            font-size: 16px;
            color: #fff;
            text-align: left;
        }

        #echarts1,
        #echarts2 {
            width: 100%;
            height: 80%;
        }

        #echarts3 {
            width: 100%;
            height: 100%;
        }

        .echarts_map {
            /* background: orchid; */
        }

        .map_title {
            display: flex;
            justify-content: space-between;
            padding-top: 20px;
            box-sizing: border-box;
            line-height: 30px;
        }

        .map_title p {
            font-size: 16px;
            color: #fff;
        }

        .map_title span {
            font-size: 14px;
            color: #578ed1;
        }

        .business_list {
            width: 270px;
            padding: 20px 30px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }

        .business_list h3 {
            font-size: 16px;
            color: #fff;
            text-align: left;
            margin-bottom: 0;
            line-height: 30px;
        }

        .business_list p {
            font-size: 14px;
            color: #6f80ac;
            line-height: 30px;
        }

        .scroll_hidden {
            margin-top: 10px;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .bottom_back {
            position: absolute;
            left: 0;
            bottom: 0;
            width: 100%;
            height: 70px;
            background: -webkit-linear-gradient(top, rgba(6, 19, 61, .1), rgba(6, 19, 61, .8));
        }

        /* .business_list ul {
            width: 320px;
            height: 100%;
            overflow-y: scroll;
        } */

        .business_list ul li {
            font-size: 14px;
            color: #fff;
            line-height: 30px;
            margin-bottom: 0;
        }
    </style>
</head>

<body>
    <nav class="nav-top">
        <div class="page-logo">
            <div class="logo-back"></div>
        </div>
        <ul class="nav-list"></ul>
        <div class="search-input search-input-style">
            <input class="input-text" type="text" placeholder="请输入">
            <span id="input_btn" class="iconfont icon-sousuo"></span>
        </div>
        <div class="my cur" onclick="goMy()">
            <span class="mys">我的空间</span>
            <span class="layui-icon layui-icon-notice"></span>
        </div>
    </nav>
    <div class="banner">
        <img class="back_banner" src="../../../public/image/顶部图/工业大数据平台.jpg">
        <div class="banner-box ab-c">
            <h3 class="back_title"></h3>
            <p class="back_text"></p>
            <!-- <span class="platform_btn"></span> -->
            <span class="collection_serve">收 藏 服 务</span>
        </div>
    </div>
    <div class="zhuti">
        <ul class="content-tab"></ul>
    </div>
    <div class="zhuti content-box">
        <ul>
            <li class="content1">
                <h3 class="serve_class">服务介绍</h3>
                <div class="serve_text"></div>
            </li>
            <li class="content2 htmlNone">
                <h3>服务优势</h3>
                <div class="content2-box"></div>
            </li>
            <li class="content3">
                <h3 class="footer_title">核心内容</h3>
                <div class="echarts_back">
                    <img src="../../public/images/bottom.png" alt="">
                    <div class="echarts_box">
                        <div class="echarts_data">
                            <div class="data_num">
                                <h3>供应商、产品与解决方案</h3>
                                <ul>
                                    <li>
                                        <p>供应商数</p>
                                        <p>2230</p>
                                    </li>
                                    <li>
                                        <p>解决方案</p>
                                        <p>2230</p>
                                    </li>
                                    <li>
                                        <p>产品数</p>
                                        <p>2230</p>
                                    </li>
                                </ul>
                            </div>
                            <div class="echarts_img">
                                <div class="img_title">
                                    <h4>各领域供应商分布</h4>
                                    <div id="echarts1"></div>
                                </div>
                                <div class="img_title">
                                    <h4>各省份供应商分布</h4>
                                    <div id="echarts2"></div>
                                </div>
                            </div>
                        </div>
                        <div class="echarts_map">
                            <div class="map_title">
                                <p>工业互联网产业</p>
                                <!-- <span>查找供应商>></span> -->
                            </div>
                            <div id="echarts3"></div>
                        </div>
                        <div class="business_list">
                            <h3>供应商列表</h3>
                            <p>供应商名称</p>
                            <div class="scroll_hidden">
                                <div class="bottom_back"></div>
                                <ul class="list_scroll">
                                    <li>金蝶软件（中国）有限公司</li>
                                    <li>浙江正泰中自控制工程有限公司</li>
                                    <li>上海宝信软件股份有限公司</li>
                                    <li>山东新华医疗器械股份有限公司</li>
                                    <li>石化盈科信息技术有限公司</li>
                                    <li>北京亚控科技发展有限公司</li>
                                    <li>山石网科通信技术有限公司</li>
                                    <li>北京力控元通科技有限公司</li>
                                    <li>深圳市成瀚科技有限公司</li>
                                    <li>金蝶软件（中国）有限公司</li>
                                    <li>浙江正泰中自控制工程有限公司</li>
                                    <li>上海宝信软件股份有限公司</li>
                                    <li>山东新华医疗器械股份有限公司</li>
                                    <li>石化盈科信息技术有限公司</li>
                                    <li>北京亚控科技发展有限公司</li>
                                    <li>山石网科通信技术有限公司</li>
                                    <li>北京力控元通科技有限公司</li>
                                    <li>深圳市成瀚科技有限公司</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <div class="help">
        <div class="head-portrait">
            <img src="../../../public/image/bigData/touxiang.png">
        </div>
        <div class="help-main">
            <img src="../../../public/image/bigData/touxiang.png">
            <h3>电话咨询</h3>
            <p>功能性能测评：400-607-6657（张女士）</p>
            <p>边缘网关测评：400-619-2176（张先生）</p>
            <p>工业APP测评：400-603-1123（李女士）</p>
            <h3>联系邮箱</h3>
            <p>功能性能测评：cloud@insper.com</p>
            <p>边缘网关测评：cloud@insper.com</p>
            <p>工业APP测评：cloud@insper.com</p>
        </div>
    </div>
    <!-- <include src="../../../footer.html"></include> -->
</body>
<script src="../../public/common/city/city.js"></script>
<script src="https://cdn.jsdelivr.net/npm/echarts/map/js/china.js?v=1598903772045"></script>
<script>
    function goMy() {
        if (window.sessionStorage.getItem('token')) {
            window.location.href = '../../admin/index.html'
        } else {
            window.location.href = '../../login.html';
        }
    }
    let request = new Call_Request();
    // 我的足迹
    function footprintAddFun(data) {
        request.method = 'POST';
        request.url = request.UrlPublic + 'web/my/footprint/insert';
        request.data = JSON.stringify(data);
        request.redata = function (res) {
        };
        request.run();
    }
    // 收藏服务
    function collectionFun(data) {
        request.method = 'POST';
        request.url = request.UrlPublic + 'web/my/collect/insert';
        request.data = JSON.stringify(data);
        request.redata = function (res) {
            $('.collection_serve').text('取 消 收 藏');
            tipsFun('你收藏了产业监测服务');
        }
        request.run();
    }
    // 取消收藏
    function cancelCollectionFun(id) {
        request.method = 'delete';
        request.url = request.UrlPublic + 'web/my/collect/delete?cmsContentId=' + id;
        request.redata = function (res) {
            $('.collection_serve').text('收 藏 服 务');
            tipsFun('你取消收藏了产业监测服务');
        }
        request.run();
    }
    // 获取收藏
    function obtainCollectionFun(cmsContentId) {
        request.method = 'get';
        request.url = request.UrlPublic + 'web/my/collect/find';
        request.data = { 'cmsContentId': cmsContentId };
        request.redata = function (res) {
            if (res.data) {
                $('.collection_serve').text('取 消 收 藏');
                $('.collection_serve').attr('id', res.data.cmsContentId);
            } else {
                $('.collection_serve').text('收 藏 服 务');
            }
        };
        request.run();
    }
    $(function () {
        let navList = '';
        Ajax('/webadmin/column/getAllColumn', null).then(function (res) {
            // let columnIdHref=location.search.substr(1).split('=')[1];
            $.each(res.data, function (index, item) {
                if (item.navigation) {
                    if ("2a6cdfed6c85461083af727f9ef7ba42" == item.columnId) {
                        obtainCollectionFun(item.columnId);
                        $('.collection_serve').on('click', function () {
                            if (sessionStorage.getItem('token')) {
                                if ($(this).text() === '收 藏 服 务') {
                                    collectionFun({ userId: sessionStorage.getItem('id'), cmsContentId: item.columnId, type: 0, title: item.columnName });
                                    footprintAddFun({ userId: sessionStorage.getItem('id'), title: '你收藏了' + item.columnName + '服务' });
                                } else {
                                    cancelCollectionFun($('.collection_serve').attr('id'));
                                    footprintAddFun({ userId: sessionStorage.getItem('id'), title: '你取消了' + item.columnName + '服务' });
                                }
                                obtainCollectionFun(item.columnId);
                            } else {
                                window.location.href = '../../login.html?url=/' + item.pcListUrl + '&columnId=' + item.columnId;
                            }
                        });
                        navList += '<li class="hove_list" columnId="' + item.columnId + '" data_url="' + item.pcListUrl + '"><span>' + item.columnName + '</span><i></i></li>';
                    } else {
                        navList += '<li columnId="' + item.columnId + '" data_url="' + item.pcListUrl + '"><span>' + item.columnName + '</span></li>';
                    }
                }
                if ('3a7d6caa3c1249c9b61703922bb3b649' == item.columnId) {
                    backBigFun("3a7d6caa3c1249c9b61703922bb3b649");
                    childrenListFun(item.children);
                }
            })
            $('.nav-list').html(navList);
            $('.nav-list').on('click', 'li', function (e) {
                e.stopPropagation();
                e.preventDefault();
                // 控制导航下划线
                $(this).append('<i></i>').siblings().children().remove('i');
                window.location.href = request.httpUrl + $(this).attr('data_url') + '?columnId=' + $(this).attr('columnId');
            })
            $('.hove_list').hover(function () {
                $('.select_nav').removeClass('htmlNone');
            }, function () {
                $('.select_nav').addClass('htmlNone');
            })
            $('.select_nav').on('click', 'li', function (e) {
                e.stopPropagation();
                e.preventDefault();
                window.location.href = request.httpUrl + $(this).attr('data_url') + '?columnId=' + $(this).attr('columnId');
            })
        })
    })
    // 大背景图片文字按钮链接
    function backBigFun(columnId) {
        Ajax('/webadmin/content/getAllContentByColumnId', { 'columnId': columnId }).then(function (res) {
            let data = JSON.parse(res.data.content[0].content).values;
            $('.back_banner').attr('src', data.back_url[0].fileDownloadUri);
            $('.back_title').text(data.back_title);
            $('.back_text').text(data.back_text);
            // $('.platform_btn').text(data.platform_btn);
            // $('.platform_btn').on('click', function () {
            //     window.open(data.platform_url);
            // })
        })
    }
    // 子栏目列表
    function childrenListFun(list) {
        $.each(list, function (index, item) {
            $('.content-tab').append('<li class="tab_item">' +
                '<img class="img-n" src="../../public/image/bigData/cydt.png">' +
                '<img class="img-h" src="../../public/image/bigData/cydtl.png">' + item.columnName +
                '</li>');
            if (item.columnName === '服务介绍') {
                serveIntroduceFun(item.columnId);
            } else if (item.columnName === '核心内容') {
                // footerImgFun(item.columnId);
            }
        });
    }
    // 服务介绍
    function serveIntroduceFun(columnId) {
        Ajax('/webadmin/content/getAllContentByColumnId', { 'columnId': columnId }).then(function (res) {
            let data = JSON.parse(res.data.content[0].listContent).values;
            $('.serve_class').text(data.title_class);
            $('.serve_text').text(data.content_text);
        });
    }
    // 底部图片
    function footerImgFun(columnId) {
        Ajax('/webadmin/content/getAllContentByColumnId', { 'columnId': columnId }).then(function (res) {
            let data = JSON.parse(res.data.content[0].listContent).values;
            $('.footer_title').text(data.title_class);
            $('.footer_img').attr('src', data.img_url[0].fileDownloadUri);
        });
    }
    echartsFun1();
    echartsFun2();
    echartsMapFun();
    function echartsFun1() {
        var myChart = echarts.init(document.getElementById("echarts1"));
        var option = {
            series: [
                {
                    type: 'pie',
                    radius: ['50%', '70%'],
                    center: ['50%', '60%'],
                    avoidLabelOverlap: false,
                    labelLine: {
                        normal: {
                            show: false,
                            length: 0,
                            length2: 0,
                        }
                    },
                    color: ['#397c85', '#fffc17', '#ea8652', '#d084e8', '#0cae72', '#0087f8'],
                    // label: {
                    //     show: false,
                    //     normal: {
                    //         // formatter(v) {
                    //         //     let text = v.name
                    //         //     return text.length < 4 ? text : `${text.slice(0, 4)}\n${text.slice(4)}`
                    //         // },
                    //         textStyle: {
                    //             fontSize: 10   //文字的字体大小
                    //         },
                    //     }
                    // },
                    data: [
                        { value: 310, name: '平台' },
                        { value: 234, name: '网络' },
                        { value: 154, name: '其他' },
                        { value: 248, name: '自动化' },
                        { value: 138, name: '安全' }
                    ]
                }
            ]
        };
        myChart.setOption(option);
    }
    function echartsFun2() {
        var myChart = echarts.init(document.getElementById("echarts2"));
        var optionData = getData()
        function getData() {
            var res = {
                series: [{
                    name: "大环",
                    type: 'gauge',
                    splitNumber: 10,
                    radius: '82%',
                    center: ['50%', '55%'],
                    startAngle: 90,
                    endAngle: -269.9999,
                    axisLine: {
                        show: false,
                        lineStyle: {
                            color: [
                                [1, '#1f59a7']
                            ]
                        }
                    },
                    axisTick: {
                        show: false
                    },
                    splitLine: {
                        show: true,
                        length: 10,
                        lineStyle: {
                            color: 'auto',
                            width: 1
                        }
                    },
                    axisLabel: {
                        distance: -18,
                        color: "#fff",
                        formatter: function (v) {
                            let c = parseInt(v)
                            switch (c + '') {
                                case '10': return '广东';
                                case '20': return '江苏';
                                case '30': return '上海';
                                case '40': return '浙江';
                                case '50': return '山东';
                                case '60': return '北京';
                                case '70': return '安徽';
                                case '80': return '福建';
                                case '90': return '陕西';
                                case '100': return '湖南';
                            }
                        }
                    },
                    detail: {
                        show: false
                    },
                }
                ],
                yAxis: []
            };
            for (let i = 0; i < 10; i++) {
                res.series.push({
                    name: '背景线',
                    type: 'pie',
                    silent: true,
                    z: 1,
                    clockWise: true,
                    hoverAnimation: false,
                    radius: [71 - i * 15 + '%', 69 - i * 15 + '%'],
                    center: ["50%", "55%"],
                    label: {
                        show: false
                    },
                    itemStyle: {
                        label: {
                            show: false,
                        },
                        labelLine: {
                            show: false
                        },
                        borderWidth: 2,
                    },
                    data: [{
                        value: 100,
                        itemStyle: {
                            color: "RGB(12,64,128)",
                            borderWidth: 0
                        },
                        tooltip: {
                            show: false
                        },
                        hoverAnimation: false
                    }]
                });
            }
            res.series.push({
                name: '半径模式',
                type: 'pie',
                radius: ['0', '60%'],
                center: ["50%", "55%"],
                roseType: 'radius',
                avoidLabelOverlap: false,
                label: {
                    normal: {
                        position: 'inner',
                        show: false,
                    }
                },
                splitLine: { show: false },
                data: [
                    { value: 10, },
                    { value: 5, },
                    { value: 15, },
                    { value: 25, },
                    { value: 20, },
                    { value: 15, },
                    { value: 10, },
                    { value: 20, },
                    { value: 10, },
                    { value: 20, }
                ]
            })
            return res;
        }

        var option = {
            color: [{
                type: 'linear',
                x: 0,
                y: 0,
                x2: 1,
                y2: 1,
                colorStops: [{
                    offset: 0,
                    color: 'rgba(10,31,95,1)'
                }, {
                    offset: 1,
                    color: 'rgba(1,232,254,1)'
                }],
                global: false
            }],
            grid: {
                top: '16%',
                bottom: '54%',
                left: "50%",
                containLabel: false
            },
            yAxis: [{
                type: 'category',
                inverse: true,
                z: 3,
                axisLine: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                axisLabel: {
                    interval: 0,
                    inside: false,
                    textStyle: {
                        color: "RGB(78,184,252)",
                        fontSize: 25,
                    },
                    show: true
                },
                data: []
            }],
            xAxis: [{
                show: false
            }],
            series: optionData.series
        };
        myChart.setOption(option);
    }
    function echartsMapFun() {
        var myChart = echarts.init(document.getElementById("echarts3"));
        var dataList = [
            { name: "南海诸岛", value: 0 },
            { name: '北京', value: randomValue() },
            { name: '天津', value: randomValue() },
            { name: '上海', value: randomValue() },
            { name: '重庆', value: randomValue() },
            { name: '河北', value: randomValue() },
            { name: '河南', value: randomValue() },
            { name: '云南', value: randomValue() },
            { name: '辽宁', value: randomValue() },
            { name: '黑龙江', value: randomValue() },
            { name: '湖南', value: randomValue() },
            { name: '安徽', value: randomValue() },
            { name: '山东', value: randomValue() },
            { name: '新疆', value: randomValue() },
            { name: '江苏', value: randomValue() },
            { name: '浙江', value: randomValue() },
            { name: '江西', value: randomValue() },
            { name: '湖北', value: randomValue() },
            { name: '广西', value: randomValue() },
            { name: '甘肃', value: randomValue() },
            { name: '山西', value: randomValue() },
            { name: '内蒙古', value: randomValue() },
            { name: '陕西', value: randomValue() },
            { name: '吉林', value: randomValue() },
            { name: '福建', value: randomValue() },
            { name: '贵州', value: randomValue() },
            { name: '广东', value: randomValue() },
            { name: '青海', value: randomValue() },
            { name: '西藏', value: randomValue() },
            { name: '四川', value: randomValue() },
            { name: '宁夏', value: randomValue() },
            { name: '海南', value: randomValue() },
            { name: '台湾', value: randomValue() },
            { name: '香港', value: randomValue() },
            { name: '澳门', value: randomValue() }
        ]
        function randomValue() {
            return Math.round(Math.random() * 1000);
        }
        option = {
            tooltip: {
                formatter: function (params, ticket, callback) {
                    return params.seriesName + '<br />' + params.name + '：' + params.value
                }//数据格式化
            },
            geo: {
                map: 'china',
                roam: false,//不开启缩放和平移
                zoom: 1.23,//视角缩放比例
                label: {
                    normal: {
                        show: true,
                        fontSize: '10',
                        color: '#fff'
                    }
                },
                itemStyle: {
                    normal: {
                        borderColor: 'rgba(147, 235, 248, 1)',
                        borderWidth: 1,
                        areaColor: {
                            type: 'radial',
                            x: 0.5,
                            y: 0.5,
                            r: 0.8,
                            colorStops: [{
                                offset: 0,
                                color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色
                            }, {
                                offset: 1,
                                color: 'rgba(147, 235, 248, .2)' // 100% 处的颜色
                            }],
                            globalCoord: false // 缺省为 false
                        },
                        shadowColor: 'rgba(128, 217, 248, 1)',
                        shadowOffsetX: -2,
                        shadowOffsetY: 2,
                        shadowBlur: 10
                    },
                    emphasis: {
                        areaColor: '#389BB7',
                        borderWidth: 0
                    }
                }
            },
            series: [
                {
                    name: '信息量',
                    type: 'map',
                    geoIndex: 0,
                    data: dataList
                }
            ]
        };
        myChart.setOption(option);
    }
    let marginNum = 0;
    setInterval(function () {
        marginNum += 20;
        if (marginNum > 300) {
            marginNum = 0;
        }
        $('.list_scroll').css({ marginTop: -marginNum + 'px' });
    }, 1000)
    // 提示框
    function tipsFun(text) {
        $('body').append('<div class="tips-text"><i></i>' + text + '</div>');
        setTimeout(function () {
            $('body .tips-text').remove();
        }, 2000);
    }
</script>
<scrip type="text/javascript" src="../../libs/js/search.js"></scrip>

</html>